в текущей реализации медиаоверлей работает так:

медиа привязаны к группам, при воспроизведении рендерятся в заранеее назначенные группы фиксированного размера

Суть апдейта:

## Пункт 1: Доработки медиа [ГОТОВО]

- [x] добавить возможность загружать файлы (как сделано с фонами чата и отдельных сообщений)
- [x] добавить менеджер уже загруженных в хранилище приложения файлов
    - [x] модалка MediaLibraryPopup с сеткой файлов
    - [x] при установке медиа появляется кнопка "выбрать из библиотеки"
    - [x] в менеджере можно добавить (drag-drop или клик), удалить файл, выбрать для использования
    - [x] фильтрация по типу (все/картинки/видео/аудио)
    - [x] сортировка (дата, имя, тип, размер)
- [x] добавить поддержку аудио

### Реализация пункта 1:

**Backend:**
- `services/store/StoreSchema.ts` - типы MediaFile, MediaFileType, обновлён MediaEventConfig
- `services/MediaLibraryService.ts` - CRUD, миграция существующих файлов, IPC хендлеры
- `webServer.ts` - роуты /media/images, /media/videos, /media/audio
- `main.ts` - инициализация сервиса

**Frontend:**
- `src/components/utils/MediaLibraryPopup.jsx` - модалка библиотеки
- `src/services/api.js` - API функции (getAllMediaFiles, saveMediaFile, deleteMediaFile, etc.)
- `src/locales/ru.js`, `en.js` - переводы в секции `mediaLibrary`

**Интеграция:**
- `MediaEventEditorPopup.jsx` - кнопка выбора из библиотеки, тип "аудио"
- `MediaOverlay.jsx` - рендеринг аудио (скрытый <audio> элемент)

**Хранилище:**
```
userData/
  media/
    images/    <- Новые изображения
    videos/    <- Видео файлы
    audio/     <- Аудио файлы
  images/      <- Старые файлы (совместимость)
```

---

## Пункт 2: Размер медиа в группе [ГОТОВО]

Дать возможность задать размер для медиа в группе, например:
    - Группа размером 1000x1000
    - Для нее задан размер медиа 250x250
    - При воспроизведении медиа большего или меньшего размера оно вписывается в контейнер 250x250 масштабируясь с сохранением соотношения сторон.
    - Исключение - аудио. Они обрабатываются как элементы нулевого размера.

### Реализация пункта 2:

- `MediaGroupSize` в StoreSchema.ts - добавлены поля `mediaWidth`, `mediaHeight`
- `MediaOverlayEditor.jsx` - UI для редактирования размера медиа (0 = авто)
- `MediaOverlay.jsx` - рендеринг с ограничением размера медиа
- Caption не ограничивается размером медиа (остаётся читаемым)

---

## Пункт 3: Способ наложения медиа [ГОТОВО]

Дать возможность выбрать способ наложения медиа:
    - рандом: каждое следующее медиа появляется в случайном свободном месте группы.
    - Медиа может быть чуть наклонено на рандомную величину (как в мемалертс) или быть "под прямым углом", опцию можно переключать
    - стек: медиа формируются одно за другим. При заполнении всего свободного места в группе элементы могут накладываться друг на друга. Начало и направление стека можно задать.

### Реализация пункта 3:

**Типы в StoreSchema.ts:**
- `PlacementMode`: 'fixed' | 'random' | 'stack'
- `RandomPlacementSettings`: rotationEnabled, maxRotation
- `StackPlacementSettings`: direction, gap, wrap

**Режимы размещения:**
- **Fixed** - все медиа в одном месте (по anchor), как раньше overlay
- **Random** - случайное расположение в пределах группы + опциональный поворот
- **Stack** - последовательное размещение с настраиваемым направлением (horizontal/vertical), gap и wrap

**UI в MediaOverlayEditor.jsx:**
- Секция "Placement" с выбором режима
- Для Random: переключатель rotation и max угол
- Для Stack: направление, gap, wrap

**Логика в MediaOverlay.jsx:**
- `generateRandomPosition()` - генерация случайной позиции с учётом размера медиа
- Стили GroupContainer для каждого режима (grid/flex/absolute)
- MediaItem с поддержкой $randomPos для случайного размещения
